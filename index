<!doctype html>
<html lang="pt-br">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="color-scheme" content="light dark" />
  <title>Arquivos Curiosos</title>
  <meta name="description" content="Cole√ß√£o de curiosidades, mist√©rios e fatos surpreendentes ‚Äî simples, r√°pido e pronto para GitHub Pages." />
  <style>
    :root{
      --bg: #0b0c0f;
      --card: #151922;
      --text: #e7e9ee;
      --muted: #c3c7d1;
      --brand: #7c5cff;
      --brand-2: #18b3f8;
      --shadow: 0 10px 30px rgba(0,0,0,.35);
      --radius: 18px;
      --gap: 16px;
    }
    @media (prefers-color-scheme: light){
      :root{ --bg:#f7f8fb; --card:#ffffff; --text:#0e1016; --muted:#4b5563; --shadow: 0 10px 30px rgba(0,0,0,.08); }
    }
    *{ box-sizing:border-box }
    html,body{ height:100% }
    body{
      margin:0; font: 16px/1.5 system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, "Helvetica Neue", Arial, "Apple Color Emoji", "Segoe UI Emoji";
      background: radial-gradient(1200px 800px at 10% -10%, rgba(124,92,255,.2), transparent 60%),
                  radial-gradient(800px 600px at 110% 20%, rgba(24,179,248,.12), transparent 60%), var(--bg);
      color: var(--text);
    }
    header{
      position: sticky; top: 0; z-index: 50; backdrop-filter: blur(10px);
      background: color-mix(in srgb, var(--bg) 85%, transparent);
      border-bottom: 1px solid color-mix(in srgb, var(--text) 12%, transparent);
    }
    .wrap{ max-width: 1100px; margin: 0 auto; padding: 14px 18px; }
    .row{ display:flex; gap: var(--gap); align-items:center; flex-wrap: wrap; }
    .space{ flex:1 }

    .brand{ display:flex; align-items:center; gap:10px; text-decoration:none; color:inherit; }
    .logo{ width:36px; height:36px; border-radius: 10px; background:
      conic-gradient(from 180deg at 50% 50%, var(--brand), var(--brand-2) 60%, var(--brand)); box-shadow: var(--shadow);
    }
    .title{ font-weight: 800; letter-spacing: .2px; }

    .controls{ display:flex; gap: var(--gap); align-items:center; flex-wrap: wrap; }
    .search{ min-width: 220px; flex: 1 1 260px; position: relative; }
    .search input{
      width:100%; padding: 12px 42px 12px 14px; border-radius: 999px; border:1px solid color-mix(in srgb, var(--text) 15%, transparent);
      background: var(--card); color: var(--text); box-shadow: var(--shadow);
    }
    .search button{ position:absolute; right:6px; top:50%; transform: translateY(-50%); border:0; background:transparent; cursor:pointer; font-size: 16px; color:var(--muted) }

    .pill, select{
      border:1px solid color-mix(in srgb, var(--text) 15%, transparent); background: var(--card); color: var(--text);
      border-radius: 999px; padding: 10px 14px; cursor: pointer; box-shadow: var(--shadow);
    }

    main{ padding: 22px 18px 40px; }
    .hero{
      max-width:1100px; margin: 18px auto 8px; padding: 18px; border-radius: var(--radius);
      background: linear-gradient(135deg, color-mix(in srgb, var(--brand) 22%, transparent), color-mix(in srgb, var(--brand-2) 16%, transparent));
      border:1px solid color-mix(in srgb, var(--text) 12%, transparent);
    }
    .hero h1{ margin:6px 0 4px; font-size: clamp(22px, 3.4vw, 34px); }
    .hero p{ margin:0; color:var(--muted) }

    .filters{ max-width:1100px; margin: 18px auto; display:flex; gap: var(--gap); align-items:center; flex-wrap:wrap; }
    .filters .pill[aria-pressed="true"]{ outline:2px solid var(--brand-2); }

    .grid{ max-width:1100px; margin: 0 auto; display:grid; gap: 18px; grid-template-columns: repeat(auto-fill, minmax(260px, 1fr)); }
    .card{
      background: var(--card); border: 1px solid color-mix(in srgb, var(--text) 12%, transparent); border-radius: var(--radius);
      padding: 18px; box-shadow: var(--shadow); display:flex; flex-direction: column; gap: 10px;
      transition: transform .15s ease, box-shadow .15s ease;
    }
    .card:hover{ transform: translateY(-2px); box-shadow: 0 14px 40px rgba(0,0,0,.18) }
    .chip{ font-size: 12px; opacity:.85; border:1px dashed color-mix(in srgb, var(--text) 20%, transparent); padding:4px 8px; border-radius:999px; width:max-content }
    .card h3{ margin:4px 0 0; font-size: 18px }
    .excerpt{ color: var(--muted); margin: 0 }
    .meta{ display:flex; gap:10px; align-items:center; color: var(--muted); font-size: 12px }
    .meta a{ color: inherit }
    .btn{ align-self:flex-start; text-decoration:none; font-weight:600; padding:10px 12px; border-radius:12px; border:1px solid color-mix(in srgb, var(--text) 15%, transparent); background:transparent; color:var(--text) }

    footer{ margin-top: 40px; padding: 24px 18px; text-align:center; color: var(--muted) }

    dialog{ border:0; border-radius: 20px; padding: 0; max-width: 720px; width: min(92vw, 720px); background: var(--card); color: var(--text); box-shadow: 0 40px 100px rgba(0,0,0,.5) }
    .dialog-body{ padding: 22px }
    .dialog-head{ display:flex; align-items:center; justify-content: space-between; gap:12px; padding: 16px 18px; border-bottom:1px solid color-mix(in srgb, var(--text) 12%, transparent) }
    .close{ border:0; background:transparent; cursor:pointer; font-size:18px; color:var(--muted) }

    .theme-toggle{ display:inline-flex; gap:8px; align-items:center; }
    .sr-only{ position:absolute; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0,0,0,0); white-space:nowrap; border:0 }

    @media (prefers-reduced-motion: no-preference){
      .fade-in{ animation: fade .3s ease both }
      @keyframes fade{ from{ opacity:0; transform: translateY(4px) } to{ opacity:1; transform:none } }
    }
  </style>
</head>
<body>
  <header>
    <div class="wrap row">
      <a class="brand" href="#" aria-label="Arquivos Curiosos ‚Äî p√°gina inicial">
        <div class="logo" aria-hidden="true"></div>
        <div class="title">Arquivos Curiosos</div>
      </a>
      <div class="space"></div>
      <div class="controls">
        <div class="search" role="search">
          <input id="q" type="search" placeholder="Pesquisar curiosidades‚Ä¶" aria-label="Pesquisar" autocomplete="off" />
          <button id="clear" title="Limpar busca" aria-label="Limpar busca">‚úï</button>
        </div>
        <label class="theme-toggle" title="Alternar tema">
          <input id="themeToggle" type="checkbox" class="sr-only" />
          <span aria-hidden="true">üåô</span>
          <span aria-hidden="true">‚òÄÔ∏è</span>
        </label>
        <select id="sort" aria-label="Ordenar">
          <option value="recent">Mais recentes</option>
          <option value="az">A‚ÄìZ</option>
          <option value="za">Z‚ÄìA</option>
        </select>
      </div>
    </div>
  </header>

  <main>
    <section class="hero fade-in" aria-label="Apresenta√ß√£o">
      <h1>Descubra fatos que parecem fic√ß√£o.</h1>
      <p>Uma cole√ß√£o viva de hist√≥rias, inven√ß√µes e mist√©rios do mundo real. 100% est√°tico, r√°pido e pronto para o GitHub Pages.</p>
    </section>

    <nav class="filters" aria-label="Filtros por categoria">
      <button class="pill" data-cat="todos" aria-pressed="true">Todos</button>
      <button class="pill" data-cat="historia">Hist√≥ria</button>
      <button class="pill" data-cat="ciencia">Ci√™ncia</button>
      <button class="pill" data-cat="tecnologia">Tecnologia</button>
      <button class="pill" data-cat="natureza">Natureza</button>
      <button class="pill" data-cat="mist√©rios">Mist√©rios</button>
    </nav>

    <section class="grid" id="grid" aria-live="polite" aria-busy="false"></section>

    <footer>
      <p>Feito com HTML + CSS + JS puro. Hospede no <strong>GitHub Pages</strong> e edite os itens no c√≥digo. ‚ú®</p>
    </footer>
  </main>

  <dialog id="dialog" aria-label="Detalhe do arquivo curioso">
    <div class="dialog-head">
      <strong id="dlgTitle">Detalhe</strong>
      <button class="close" id="dlgClose" aria-label="Fechar">‚úï</button>
    </div>
    <div class="dialog-body" id="dlgBody"></div>
  </dialog>

  <script>
  // Utilit√°rios robustos ‚Äî prote√ß√µes para "nunca falhar"
  const safe = (fn, fallback=null) => { try { return fn() } catch(e){ console.error(e); return fallback } }
  const $ = (sel, ctx=document) => ctx.querySelector(sel)
  const $$ = (sel, ctx=document) => Array.from(ctx.querySelectorAll(sel))
  const fmtDate = (iso) => new Date(iso).toLocaleDateString('pt-BR', { year:'numeric', month:'short' })

  // Dados: edite/adicione seus pr√≥prios itens aqui
  const DATA = [
    { id: 'antikythera', titulo: 'Mecanismo de Antic√≠tera', categoria: 'historia', data: '2024-06-01',
      resumo: 'Um ‚Äúcomputador‚Äù grego antigo que previa eclipses e posi√ß√µes dos planetas.',
      conteudo: 'Descoberto em 1901 num naufr√°gio perto de Antic√≠tera, o dispositivo cont√©m engrenagens complexas que modelavam ciclos astron√¥micos. Estudos com tomografia revelaram inscri√ß√µes e fun√ß√µes surpreendentes.',
      fonte: 'https://en.wikipedia.org/wiki/Antikythera_mechanism' },
    { id: 'turritopsis', titulo: '√Ågua-viva ‚Äúimortal‚Äù', categoria: 'natureza', data: '2023-11-15',
      resumo: 'A Turritopsis dohrnii pode reverter ao est√°gio juvenil e reiniciar o ciclo de vida.',
      conteudo: 'Sob estresse, essa esp√©cie reprograma suas c√©lulas, voltando ao est√°gio de p√≥lipo. N√£o significa que n√£o morra, mas que possui um truque biol√≥gico raro.',
      fonte: 'https://pt.wikipedia.org/wiki/Turritopsis_dohrnii' },
    { id: 'voynich', titulo: 'Manuscrito de Voynich', categoria: 'mist√©rios', data: '2022-10-01',
      resumo: 'Um livro ilustrado em l√≠ngua indecifrada, datado do s√©culo XV.',
      conteudo: 'Repleto de diagramas bot√¢nicos e astron√¥micos, o manuscrito desafia cript√≥grafos h√° d√©cadas. Teorias v√£o de l√≠ngua artificial a fraude hist√≥rica ‚Äî nenhuma consenso final.',
      fonte: 'https://pt.wikipedia.org/wiki/Manuscrito_Voynich' },
    { id: 'cita-ouro', titulo: 'Cidades perdidas de ouro', categoria: 'historia', data: '2021-08-01',
      resumo: 'Lendas como El Dorado inspiraram expedi√ß√µes perigosas e mapas fantasiosos.',
      conteudo: 'Embora m√≠ticas, essas hist√≥rias motivaram cartografia e encontros culturais. Relatos exagerados misturavam riqueza e poder com desconhecido geogr√°fico.',
      fonte: 'https://pt.wikipedia.org/wiki/El_Dorado' },
    { id: 'wow', titulo: 'Sinal ‚ÄúWow!‚Äù', categoria: 'ciencia', data: '2020-03-01',
      resumo: 'Um pico de r√°dio de 72 segundos registrado em 1977 que at√© hoje intriga astr√¥nomos.',
      conteudo: 'Detectado pelo radiotelesc√≥pio Big Ear, o sinal coincidiu com a dire√ß√£o de Sagit√°rio. Repeti√ß√µes n√£o foram confirmadas, mantendo o mist√©rio vivo.',
      fonte: 'https://pt.wikipedia.org/wiki/Sinal_Wow!' },
    { id: 'crypt', titulo: 'Cifra de Beale', categoria: 'mist√©rios', data: '2019-09-12',
      resumo: 'Suposto tesouro enterrado na Virg√≠nia, revelado por mensagens cifradas do s√©culo XIX.',
      conteudo: 'A segunda cifra parece usar a Declara√ß√£o de Independ√™ncia como chave. Autenticidade √© debatida; ca√ßadores seguem tentando decifrar as demais mensagens.',
      fonte: 'https://en.wikipedia.org/wiki/Beale_ciphers' },
    { id: 'boltz', titulo: 'C√©rebro de Boltzmann', categoria: 'ciencia', data: '2024-02-02',
      resumo: 'Um paradoxo cosmol√≥gico: consci√™ncias que surgem por flutua√ß√µes aleat√≥rias do universo.',
      conteudo: 'Se o universo √© vasto e antigo, flutua√ß√µes t√©rmicas poderiam gerar ‚Äúobservadores‚Äù breves. Isso desafia pressupostos sobre probabilidade e observa√ß√£o.',
      fonte: 'https://en.wikipedia.org/wiki/Boltzmann_brain' },
    { id: 'bloop', titulo: 'O som Bloop', categoria: 'natureza', data: '2012-07-01',
      resumo: 'Um som submarino potente detectado em 1997, depois atribu√≠do a gelo quebrando.',
      conteudo: 'O NOAA registrou o ‚ÄúBloop‚Äù no Pac√≠fico. D√©cadas depois, an√°lises apontaram origem criosismal ‚Äî icebergs rachando ‚Äî e n√£o um ‚Äúmonstro marinho‚Äù.',
      fonte: 'https://en.wikipedia.org/wiki/Bloop' },
    { id: 'turings', titulo: 'Teste de Turing', categoria: 'tecnologia', data: '1950-01-01',
      resumo: 'Uma proposta de Alan Turing para avaliar intelig√™ncia de m√°quinas por conversa√ß√£o.',
      conteudo: 'No ‚Äújogo da imita√ß√£o‚Äù, se um avaliador n√£o distingue m√°quina de humano, a m√°quina ‚Äúpassa‚Äù. O teste influenciou debates sobre IA at√© hoje.',
      fonte: 'https://pt.wikipedia.org/wiki/Teste_de_Turing' },
    { id: 'voyager', titulo: 'Disco de Ouro da Voyager', categoria: 'tecnologia', data: '1977-09-05',
      resumo: 'Mensagens gravadas em discos enviados ao espa√ßo nas sondas Voyager.',
      conteudo: 'Cont√©m sauda√ß√µes em 55 idiomas, sons da Terra e m√∫sica. Um ‚Äúcart√£o postal‚Äù interestelar para qualquer civiliza√ß√£o que o encontre.',
      fonte: 'https://pt.wikipedia.org/wiki/Disco_de_ouro_da_Voyager' }
  ]

  // Estado
  const state = { q: '', cat: 'todos', sort: 'recent' }

  // Elementos
  const grid = $('#grid'), q = $('#q'), clearBtn = $('#clear'), sort = $('#sort')
  const dialog = $('#dialog'), dlgTitle = $('#dlgTitle'), dlgBody = $('#dlgBody'), dlgClose = $('#dlgClose')

  // Renderiza√ß√£o dos cards
  function render(){
    grid.setAttribute('aria-busy','true')
    const list = filterAndSort(DATA, state)
    grid.innerHTML = ''

    if(!list.length){
      const empty = document.createElement('div')
      empty.className = 'card'
      empty.innerHTML = `<h3>Nenhum resultado</h3><p class="excerpt">Tente limpar a busca ou trocar os filtros.</p>`
      grid.appendChild(empty)
      grid.setAttribute('aria-busy','false')
      return
    }

    const frag = document.createDocumentFragment()
    list.forEach(item => frag.appendChild(card(item)))
    grid.appendChild(frag)
    grid.setAttribute('aria-busy','false')
  }

  function card(item){
    const el = document.createElement('article')
    el.className = 'card fade-in'
    el.innerHTML = `
      <span class="chip" aria-label="Categoria">${item.categoria}</span>
      <h3>${item.titulo}</h3>
      <p class="excerpt">${item.resumo}</p>
      <div class="meta">
        <span>${fmtDate(item.data)}</span>
        <span>‚Ä¢</span>
        <a href="${item.fonte}" target="_blank" rel="noopener">Fonte</a>
      </div>
      <button class="btn" data-open="${item.id}">Ler mais</button>
    `
    el.querySelector('[data-open]')?.addEventListener('click', () => openDialog(item))
    return el
  }

  function filterAndSort(data, {q, cat, sort}){
    const term = (q || '').trim().toLowerCase()
    let arr = data.filter(d => (cat==='todos' || d.categoria===cat))
    if(term){
      arr = arr.filter(d => [d.titulo, d.resumo, d.conteudo].join(' ').toLowerCase().includes(term))
    }
    const byRecent = (a,b) => new Date(b.data) - new Date(a.data)
    const byAZ = (a,b) => a.titulo.localeCompare(b.titulo, 'pt-BR')
    const byZA = (a,b) => b.titulo.localeCompare(a.titulo, 'pt-BR')

    const sorter = sort==='az' ? byAZ : sort==='za' ? byZA : byRecent
    return arr.sort(sorter)
  }

  // Di√°logo (detalhe)
  function openDialog(item){
    dlgTitle.textContent = item.titulo
    dlgBody.innerHTML = `
      <p class="chip">${item.categoria} ‚Ä¢ ${fmtDate(item.data)}</p>
      <p>${item.conteudo}</p>
      <p><a href="${item.fonte}" target="_blank" rel="noopener">Ver fonte original</a></p>
    `
    if(typeof dialog.showModal === 'function') dialog.showModal(); else alert(item.conteudo)
  }
  dlgClose.addEventListener('click', () => dialog.close())
  dialog.addEventListener('click', (e) => { if(e.target === dialog) dialog.close() })

  // Filtros de categoria
  const catButtons = $$('.filters .pill')
  catButtons.forEach(btn => btn.addEventListener('click', () => {
    catButtons.forEach(b => b.setAttribute('aria-pressed','false'))
    btn.setAttribute('aria-pressed','true')
    state.cat = btn.dataset.cat
    render()
  }))

  // Busca
  q.addEventListener('input', () => { state.q = q.value; render() })
  clearBtn.addEventListener('click', () => { q.value=''; state.q=''; render(); q.focus() })

  // Ordena√ß√£o
  sort.addEventListener('change', () => { state.sort = sort.value; render() })

  // Tema (persistente)
  const themeT = $('#themeToggle')
  const THEME_KEY = 'arquivos-curiosos:theme'
  function applyTheme(){
    const mode = localStorage.getItem(THEME_KEY) || 'auto'
    document.documentElement.dataset.theme = mode
    // N√£o for√ßamos cores; deixamos o CSS cuidar.
    themeT.checked = mode === 'dark'
  }
  themeT.addEventListener('change', () => {
    const mode = themeT.checked ? 'dark' : 'auto'
    safe(() => localStorage.setItem(THEME_KEY, mode))
    applyTheme()
  })

  // Inicializa√ß√£o segura
  safe(() => { applyTheme(); render() })

  // Progressive Enhancement: se algo der errado, ainda mostra conte√∫do b√°sico
  window.addEventListener('error', () => {
    if(!grid?.children?.length){
      const list = DATA.slice(0,4)
      list.forEach(item => grid.appendChild(card(item)))
    }
  }, { once: true })
  </script>
</body>
</html>
